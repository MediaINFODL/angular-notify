angular.module("cgNotify",["ngSanitize"]).factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope","$sce",function(a,b,c,d,e,f){var g=10,h=15,i=1e4,j="angular-notify.html",k="",l=document.body,m="",n=!1,o=!1,p=!1,q=!1,r=[],s=function(s){"object"!=typeof s&&(s={message:s}),s.templateUrl=s.templateUrl?s.templateUrl:j,s.position=s.position?s.position:k,s.container=s.container?s.container:l,s.classes=s.classes?s.classes:m,s.persistent=s.persistent?s.persistent:n,s.duration=s.duration?s.duration:i,s.startTop=s.startTop?s.startTop:g,s.single=s.single?s.single:o,s.closable=s.closable?s.closable:p,s.toggleable=s.toggleable?s.toggleable:q,s.single&&(s.classes+=" ns-single");var t=s.scope?s.scope.$new():e.$new();t.$message=s.message,t.$classes=s.classes,t.$messageTemplate=s.messageTemplate,t.$persistent=s.persistent,t.$closable=s.closable,t.$toggleable=s.toggleable,t.$state=!1,b.get(s.templateUrl,{cache:d}).success(function(b){var d=c(b)(t);if(d.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(a){("opacity"===a.propertyName||a.originalEvent&&"opacity"===a.originalEvent.propertyName)&&(d.remove(),s.single||(r.splice(r.indexOf(d),1),i()))}),s.messageTemplate){for(var e,g=0;g<d.children().length;g++)if(angular.element(d.children()[g]).hasClass("cg-notify-message-template")){e=angular.element(d.children()[g]);break}if(!e)throw new Error("cgNotify could not find the .cg-notify-message-template element in "+s.templateUrl+".");e.append(c(s.messageTemplate)(t))}angular.element(s.container).append(d),d.hasClass("ns-effect-slide")&&d.hasClass("ns-bottomright")&&d.css({bottom:"-"+d.outerHeight()+"px"}),t.$state=!0,s.single||(r.push(d),"center"===s.position&&a(function(){d.css("margin-left","-"+d[0].offsetWidth/2+"px")})),t.$close=function(){s.toggleable?t.$hide():(d.hasClass("ns-effect-slide")&&d.hasClass("ns-bottomright")?d.css({bottom:"-"+d.outerHeight()+"px"}):d.css("opacity",0).attr("data-closing","true"),d.removeClass("ns-show").addClass("ns-hide"),t.$state=!1,a(function(){d.remove(),s.single||(r.splice(r.indexOf(d),1),$("body").addClass("notice-box-closing"),setTimeout(function(){$("body").removeClass("notice-box-closing")},250),i())},500))},t.$show=function(){d.hasClass("ns-effect-slide")&&d.hasClass("ns-bottomright")?d.css({bottom:"-"+d.outerHeight()+"px"}):d.css("opacity",1).attr("data-closing","false"),t.$state=!0,d.removeClass("ns-hide").addClass("ns-show")},t.$hide=function(){d.hasClass("ns-effect-slide")&&d.hasClass("ns-bottomright")?d.css({bottom:"-"+d.outerHeight()+"px"}):d.css("opacity",0).attr("data-closing","true"),t.$state=!1,d.removeClass("ns-show").addClass("ns-hide")},t.$bindFullHTML=function(a){return f.trustAsHtml(a)};var i=function(){for(var a=0,b=s.startTop,c=0;c<r.length;c++){var d=10,e=r[c],f=e[0].offsetHeight,g=b+f+d;e.attr("data-closing")||(b+=f+h),e.css("top",g+"px").css("margin-top","-"+(f+d)+"px").css("visibility","visible"),a++}};s.single||a(function(){i()}),!s.persistent&&s.duration>0&&a(function(){t.$close()},s.duration)}).error(function(a){throw new Error("Template specified for cgNotify ("+s.templateUrl+") could not be loaded. "+a)});var u={};return u.close=function(){t.$close&&t.$close()},u.show=function(){t.$show&&t.$show()},u.hide=function(){t.$hide&&t.$hide()},u.getState=function(){return t.$state},Object.defineProperty(u,"message",{get:function(){return t.$message},set:function(a){t.$message=a}}),u};return s.config=function(a){g=angular.isUndefined(a.startTop)?g:a.startTop,h=angular.isUndefined(a.verticalSpacing)?h:a.verticalSpacing,i=angular.isUndefined(a.duration)?i:a.duration,j=a.templateUrl?a.templateUrl:j,k=angular.isUndefined(a.position)?k:a.position,l=a.container?a.container:l,m=a.classes?a.classes:m,n=a.persistent?a.persistent:n,p=a.closable?a.closable:p,q=a.toggleable?a.toggleable:q},s.closeAll=function(){for(var b=r.length-1;b>=0;b--){var c=r[b];c.css("opacity",0),c.removeClass("ns-show").addClass("ns-hide"),a(function(){c.remove()},500)}},s}]),angular.module("cgNotify").run(["$templateCache",function(a){"use strict";a.put("angular-notify.html",'<div class="cg-notify-message" ng-class="$classes">\n\n    <div ng-show="!$messageTemplate">\n        {{$message}}\n    </div>\n\n    <div ng-show="$messageTemplate" class="cg-notify-message-template">\n        \n    </div>\n\n    <button type="button" class="cg-notify-close" ng-click="$close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="cg-notify-sr-only">Close</span>\n    </button>\n\n</div>')}]);