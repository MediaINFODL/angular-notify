angular.module("cgNotify",[]).factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope",function(e,m,j,f,n){var l=10;var c=15;var i=10000;var d="angular-notify.html";var k="center";var b=document.body;var h="";var g=false;var a=[];var o=function(p){if(typeof p!=="object"){p={message:p}}p.templateUrl=p.templateUrl?p.templateUrl:d;p.position=p.position?p.position:k;p.container=p.container?p.container:b;p.classes=p.classes?p.classes:h;p.persistent=p.persistent?p.persistent:g;var q=p.scope?p.scope.$new():n.$new();q.$message=p.message;q.$classes=p.classes;q.$messageTemplate=p.messageTemplate;q.$persistent=p.persistent;m.get(p.templateUrl,{cache:f}).success(function(u){var v=j(u)(q);v.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(x){if(x.propertyName==="opacity"||(x.originalEvent&&x.originalEvent.propertyName==="opacity")){v.remove();a.splice(a.indexOf(v),1);w()}});if(p.messageTemplate){var s;for(var t=0;t<v.children().length;t++){if(angular.element(v.children()[t]).hasClass("cg-notify-message-template")){s=angular.element(v.children()[t]);break}}if(s){s.append(j(p.messageTemplate)(q))}else{throw new Error("cgNotify could not find the .cg-notify-message-template element in "+p.templateUrl+".")}}angular.element(p.container).append(v);a.push(v);if(p.position==="center"){e(function(){v.css("margin-left","-"+(v[0].offsetWidth/2)+"px")})}q.$close=function(){v.css("opacity",0).attr("data-closing","true");v.removeClass("ns-show").addClass("ns-hide");e(function(){v.remove()},500);w()};var w=function(){var A=0;var y=l;for(var C=a.length-1;C>=0;C--){var z=10;var B=a[C];var x=B[0].offsetHeight;var D=y+x+z;if(B.attr("data-closing")){D+=20}else{y+=x+c}B.css("top",D+"px").css("margin-top","-"+(x+z)+"px").css("visibility","visible");A++}};e(function(){w()});if(!p.persistent&&i>0){e(function(){q.$close()},i)}}).error(function(s){throw new Error("Template specified for cgNotify ("+p.templateUrl+") could not be loaded. "+s)});var r={};r.close=function(){if(q.$close){q.$close()}};Object.defineProperty(r,"message",{get:function(){return q.$message},set:function(s){q.$message=s}});return r};o.config=function(p){l=!angular.isUndefined(p.startTop)?p.startTop:l;c=!angular.isUndefined(p.verticalSpacing)?p.verticalSpacing:c;i=!angular.isUndefined(p.duration)?p.duration:i;d=p.templateUrl?p.templateUrl:d;k=!angular.isUndefined(p.position)?p.position:k;b=p.container?p.container:b;h=p.classes?p.classes:h;g=p.persistent?p.persistent:g};o.closeAll=function(){for(var q=a.length-1;q>=0;q--){var p=a[q];p.css("opacity",0);p.removeClass("ns-show").addClass("ns-hide");e(function(){p.remove()},500)}};return o}]);