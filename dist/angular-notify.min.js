angular.module("cgNotify",[]).factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope",function(e,k,h,f,l){var j=10;var c=15;var g=10000;var d="angular-notify.html";var i="center";var b=document.body;var a=[];var m=function(n){if(typeof n!=="object"){n={message:n}}n.templateUrl=n.templateUrl?n.templateUrl:d;n.position=n.position?n.position:i;n.container=n.container?n.container:b;n.classes=n.classes?n.classes:"";var o=n.scope?n.scope.$new():l.$new();o.$message=n.message;o.$classes=n.classes;o.$messageTemplate=n.messageTemplate;k.get(n.templateUrl,{cache:f}).success(function(s){var t=h(s)(o);t.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(v){if(v.propertyName==="opacity"||(v.originalEvent&&v.originalEvent.propertyName==="opacity")){t.remove();a.splice(a.indexOf(t),1);u()}});if(n.messageTemplate){var q;for(var r=0;r<t.children().length;r++){if(angular.element(t.children()[r]).hasClass("cg-notify-message-template")){q=angular.element(t.children()[r]);break}}if(q){q.append(h(n.messageTemplate)(o))}else{throw new Error("cgNotify could not find the .cg-notify-message-template element in "+n.templateUrl+".")}}angular.element(n.container).append(t);a.push(t);if(n.position==="center"){e(function(){t.css("margin-left","-"+(t[0].offsetWidth/2)+"px")})}o.$close=function(){t.css("opacity",0).attr("data-closing","true");t.removeClass("ns-show").addClass("ns-hide");e(function(){t.remove()},500);u()};var u=function(){var y=0;var w=j;for(var A=a.length-1;A>=0;A--){var x=10;var z=a[A];var v=z[0].offsetHeight;var B=w+v+x;if(z.attr("data-closing")){B+=20}else{w+=v+c}z.css("top",B+"px").css("margin-top","-"+(v+x)+"px").css("visibility","visible");y++}};e(function(){u()});if(g>0){e(function(){o.$close()},g)}}).error(function(q){throw new Error("Template specified for cgNotify ("+n.templateUrl+") could not be loaded. "+q)});var p={};p.close=function(){if(o.$close){o.$close()}};Object.defineProperty(p,"message",{get:function(){return o.$message},set:function(q){o.$message=q}});return p};m.config=function(n){j=!angular.isUndefined(n.startTop)?n.startTop:j;c=!angular.isUndefined(n.verticalSpacing)?n.verticalSpacing:c;g=!angular.isUndefined(n.duration)?n.duration:g;d=n.templateUrl?n.templateUrl:d;i=!angular.isUndefined(n.position)?n.position:i;b=n.container?n.container:b};m.closeAll=function(){for(var o=a.length-1;o>=0;o--){var n=a[o];n.css("opacity",0);n.removeClass("ns-show").addClass("ns-hide");e(function(){n.remove()},500)}};return m}]);