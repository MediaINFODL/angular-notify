angular.module("cgNotify",["ngSanitize"]).factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope","$sce",function(e,t,s,n,o,a){var i=10,l=15,r=1e4,c="angular-notify.html",g="",p="#notify",d="",f=!1,u=!1,m=!1,h=!1,b=[],v=function(v){"object"!=typeof v&&(v={message:v}),v.templateUrl=v.templateUrl?v.templateUrl:c,v.position=v.position?v.position:g,v.container=v.container?v.container:p,v.classes=v.classes?v.classes:d,v.persistent=v.persistent?v.persistent:f,v.duration=v.duration?v.duration:r,v.startTop=v.startTop?v.startTop:i,v.single=v.single?v.single:u,v.closable=v.closable?v.closable:m,v.toggleable=v.toggleable?v.toggleable:h,v.single&&(v.classes+=" ns-single");var y=v.scope?v.scope.$new():o.$new();y.$message=v.message,y.$classes=v.classes,y.$messageTemplate=v.messageTemplate,y.$persistent=v.persistent,y.$closable=v.closable,y.$toggleable=v.toggleable,y.$state=!1,t.get(v.templateUrl,{cache:n}).success(function(t){var n=s(t)(y);if(n.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(e){("opacity"===e.propertyName||e.originalEvent&&"opacity"===e.originalEvent.propertyName)&&(n.remove(),v.single||(b.splice(b.indexOf(n),1),r()))}),v.messageTemplate){for(var o,i=0;i<n.children().length;i++)if(angular.element(n.children()[i]).hasClass("cg-notify-message-template")){o=angular.element(n.children()[i]);break}if(!o)throw new Error("cgNotify could not find the .cg-notify-message-template element in "+v.templateUrl+".");o.append(s(v.messageTemplate)(y))}angular.element(v.container).append(n),n.hasClass("ns-effect-slide")&&n.hasClass("ns-bottomright")&&n.css({bottom:"-"+n.outerHeight()+"px"}),y.$state=!0,v.single||(b.push(n),"center"===v.position&&e(function(){n.css("margin-left","-"+n[0].offsetWidth/2+"px")})),y.$close=function(){v.toggleable?y.$hide():(n.hasClass("ns-effect-slide")&&n.hasClass("ns-bottomright")?n.css({bottom:"-"+n.outerHeight()+"px"}):n.css("opacity",0).attr("data-closing","true"),n.removeClass("ns-show").addClass("ns-hide"),y.$state=!1,e(function(){n.remove(),v.single||(b.splice(b.indexOf(n),1),$("body").addClass("notice-box-closing"),setTimeout(function(){$("body").removeClass("notice-box-closing")},250),r())},500))},y.$show=function(){n.hasClass("ns-effect-slide")&&n.hasClass("ns-bottomright")?n.css({bottom:"-"+n.outerHeight()+"px"}):n.css("opacity",1).attr("data-closing","false"),y.$state=!0,n.removeClass("ns-hide").addClass("ns-show")},y.$hide=function(){n.hasClass("ns-effect-slide")&&n.hasClass("ns-bottomright")?n.css({bottom:"-"+n.outerHeight()+"px"}):n.css("opacity",0).attr("data-closing","true"),y.$state=!1,n.removeClass("ns-show").addClass("ns-hide")},y.$bindFullHTML=function(e){return a.trustAsHtml(e)};var r=function(){for(var e=0,t=v.startTop,s=0;s<b.length;s++){var n=10,o=b[s],a=o[0].offsetHeight,i=t+a+n;o.attr("data-closing")||(t+=a+l),o.css("top",i+"px").css("margin-top","-"+(a+n)+"px").css("visibility","visible"),e++}};v.single||e(function(){r()}),!v.persistent&&v.duration>0&&e(function(){y.$close()},v.duration)}).error(function(e){throw new Error("Template specified for cgNotify ("+v.templateUrl+") could not be loaded. "+e)});var C={};return C.close=function(){y.$close&&y.$close()},C.show=function(){y.$show&&y.$show()},C.hide=function(){y.$hide&&y.$hide()},C.getState=function(){return y.$state},Object.defineProperty(C,"message",{get:function(){return y.$message},set:function(e){y.$message=e}}),C};return v.config=function(e){i=angular.isUndefined(e.startTop)?i:e.startTop,l=angular.isUndefined(e.verticalSpacing)?l:e.verticalSpacing,r=angular.isUndefined(e.duration)?r:e.duration,c=e.templateUrl?e.templateUrl:c,g=angular.isUndefined(e.position)?g:e.position,p=p,d=e.classes?e.classes:d,f=e.persistent?e.persistent:f,m=e.closable?e.closable:m,h=e.toggleable?e.toggleable:h},v.closeAll=function(){for(var t=b.length-1;t>=0;t--){var s=b[t];s.css("opacity",0),s.removeClass("ns-show").addClass("ns-hide"),e(function(){s.remove()},500)}},v}]);