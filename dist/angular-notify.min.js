angular.module("cgNotify",["ngSanitize"]).factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope","$sce",function(p,q,m,d,e,h){var b=10;var k=15;var a=10000;var i="angular-notify.html";var r="";var g=document.body;var n="";var l=false;var o=false;var c=false;var j=[];var f=function(s){if(typeof s!=="object"){s={message:s}}s.templateUrl=s.templateUrl?s.templateUrl:i;s.position=s.position?s.position:r;s.container=s.container?s.container:g;s.classes=s.classes?s.classes:n;s.persistent=s.persistent?s.persistent:l;s.duration=s.duration?s.duration:a;s.startTop=s.startTop?s.startTop:b;s.single=s.single?s.single:o;s.closable=s.closable?s.closable:c;if(s.single){s.classes+=" ns-single"}var t=s.scope?s.scope.$new():e.$new();t.$message=s.message;t.$classes=s.classes;t.$messageTemplate=s.messageTemplate;t.$persistent=s.persistent;t.$closable=s.closable;q.get(s.templateUrl,{cache:d}).success(function(x){var y=m(x)(t);y.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(A){if(A.propertyName==="opacity"||(A.originalEvent&&A.originalEvent.propertyName==="opacity")){y.remove();if(!s.single){j.splice(j.indexOf(y),1);z()}}});if(s.messageTemplate){var v;for(var w=0;w<y.children().length;w++){if(angular.element(y.children()[w]).hasClass("cg-notify-message-template")){v=angular.element(y.children()[w]);break}}if(v){v.append(m(s.messageTemplate)(t))}else{throw new Error("cgNotify could not find the .cg-notify-message-template element in "+s.templateUrl+".")}}angular.element(s.container).append(y);if(y.hasClass("ns-effect-slide")&&y.hasClass("ns-bottomright")){y.css({bottom:"-"+y.outerHeight()+"px"})}if(!s.single){j.push(y);if(s.position==="center"){p(function(){y.css("margin-left","-"+(y[0].offsetWidth/2)+"px")})}}t.$close=function(){if(y.hasClass("ns-effect-slide")&&y.hasClass("ns-bottomright")){y.css({bottom:"-"+y.outerHeight()+"px"})}else{y.css("opacity",0).attr("data-closing","true")}y.removeClass("ns-show").addClass("ns-hide");p(function(){y.remove();if(!s.single){j.splice(j.indexOf(y),1);$("body").addClass("notice-box-closing");setTimeout(function(){$("body").removeClass("notice-box-closing")},250);z()}},500)};t.$bindFullHTML=function(A){return h.trustAsHtml(A)};var z=function(){var D=0;var B=s.startTop;for(var F=0;F<j.length;F++){var C=10;var E=j[F];var A=E[0].offsetHeight;var G=B+A+C;if(E.attr("data-closing")){}else{B+=A+k}E.css("top",G+"px").css("margin-top","-"+(A+C)+"px").css("visibility","visible");D++}};if(!s.single){p(function(){z()})}if(!s.persistent&&s.duration>0){p(function(){t.$close()},s.duration)}}).error(function(v){throw new Error("Template specified for cgNotify ("+s.templateUrl+") could not be loaded. "+v)});var u={};u.close=function(){if(t.$close){t.$close()}};Object.defineProperty(u,"message",{get:function(){return t.$message},set:function(v){t.$message=v}});return u};f.config=function(s){b=!angular.isUndefined(s.startTop)?s.startTop:b;k=!angular.isUndefined(s.verticalSpacing)?s.verticalSpacing:k;a=!angular.isUndefined(s.duration)?s.duration:a;i=s.templateUrl?s.templateUrl:i;r=!angular.isUndefined(s.position)?s.position:r;g=s.container?s.container:g;n=s.classes?s.classes:n;l=s.persistent?s.persistent:l;c=s.closable?s.closable:c};f.closeAll=function(){for(var t=j.length-1;t>=0;t--){var s=j[t];s.css("opacity",0);s.removeClass("ns-show").addClass("ns-hide");p(function(){s.remove()},500)}};return f}]);